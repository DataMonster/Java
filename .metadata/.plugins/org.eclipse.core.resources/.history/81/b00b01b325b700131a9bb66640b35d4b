package com.java;

import java.util.ArrayList;
import java.util.Arrays;
import java.util.HashMap;
import java.util.LinkedList;
import java.util.List;
import java.util.Map;

public class test3 {

	 Map <Integer, Double> calculateFinalScores (List<TestResult> results) {
		 Map<Integer, ArrayList<Integer>> allscore = new HashMap<Integer, ArrayList<Integer>>();
		 //to store the student and all his/her score pairs, integer-array also works but 
		 //the total number of scores if unknow, arraylist is better for size changing.
		 for(TestResult re:results){
			 if(allscore.containsKey(re.studentId)){
				 allscore.get(re.studentId).add(re.testScore);
			 } else {
				 ArrayList<Integer> scores = new ArrayList<Integer>();
				 scores.add(re.testScore);
				 allscore.put(re.studentId, scores);
			 }
		 }
		 
		 //Convert ArrayList scores to array and sort them, get the average best 5 score.
		 Map<Integer, Double> result = new HashMap<Integer, Double>();
		 for(Integer key:allscore.keySet()){
			 Object[] arr = allscore.get(key).toArray();
			 Arrays.sort(arr);
			 int i = arr.length-1;
			 int sum = 0;
				while(i>arr.length-6){
					sum = sum + (int)arr[i];
				//System.out.println(arr[i]);
				i--;
			}
			double avg = sum/5;
			result.put(key, avg);
		 }
		 return result;
	 }
	
	public static void main(String[] args) {
		List<TestResult> results = new LinkedList<TestResult>();

		LinkedList<Integer> result = new LinkedList<Integer>();
		result.add(3);
		result.add(97);
		result.add(77);
		result.add(77);
		result.add(79);
		result.add(91);
		Object[] arr = result.toArray();
		Arrays.sort(arr);
		int i = arr.length-1;
		while(i>arr.length-6){
		System.out.println(arr[i]);
		i--;
		}
		
	}

}

class TestResult {
    int studentId;
    String testDate;
    int testScore;
 }